<!DOCTYPE html>
<html>
<head><title>Activity Types Test</title></head>
<body>
<h1>Activity Types Test</h1>
<div id="results">Testing...</div>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="js/supabase-client.js"></script>
<script>
setTimeout(async () => {
  try {
    if (!window.supabaseClient) throw new Error("No client");
    
    // Test activity_types table
    const {data: types, error: typesError} = await window.supabaseClient
      .from("activity_types")
      .select("id, name, slug")
      .limit(5);
    
    let html = "<h3>Activity Types Table</h3>";
    if (typesError) {
      html += "❌ Error: " + typesError.message + "<br>";
    } else {
      html += "✅ Found " + (types?.length || 0) + " activity types<br>";
      if (types) {
        types.forEach(type => {
          html += "- " + type.name + " (" + type.slug + ")<br>";
        });
      }
    }
    
    // Test activities without join
    const {data: activities, error: activitiesError} = await window.supabaseClient
      .from("activities")
      .select("id, title, activity_type_id")
      .limit(5);
    
    html += "<h3>Activities (simple query)</h3>";
    if (activitiesError) {
      html += "❌ Error: " + activitiesError.message + "<br>";
    } else {
      html += "✅ Found " + (activities?.length || 0) + " activities<br>";
    }
    
    document.getElementById("results").innerHTML = html;
    
  } catch(e) {
    document.getElementById("results").innerHTML = "❌ Error: " + e.message;
  }
}, 2000);
</script>
</body>
</html>
